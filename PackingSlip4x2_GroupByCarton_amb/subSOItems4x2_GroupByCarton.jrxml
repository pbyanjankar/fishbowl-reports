<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="subSOItems4x6" pageWidth="276" pageHeight="422" whenNoDataType="AllSectionsNoDetail" columnWidth="276" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="f48d9b10-2c12-4e14-81f7-f7d2425a3a93">
	<property name="ireport.scriptlethandling" value="0"/>
	<property name="ireport.encoding" value="UTF-8"/>
	<property name="ireport.zoom" value="1.5"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<import value="net.sf.jasperreports.engine.*"/>
	<import value="java.util.*"/>
	<import value="net.sf.jasperreports.engine.data.*"/>
	<style name="9" fontName="Arial" fontSize="9" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="10" isDefault="true" fontName="Arial" fontSize="10" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="12" fontName="Arial" fontSize="12" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="14" fontName="Arial" fontSize="14" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="10b" fontName="Arial" fontSize="10" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="12b" fontName="Arial" fontSize="12" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="14b" fontName="Arial" fontSize="14" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="16b" fontName="Arial" fontSize="16" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="18b" fontName="Arial" fontSize="18" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="24b" fontName="Arial" fontSize="24" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="10i" fontName="Arial" fontSize="10" isBold="false" isItalic="true" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="12i" fontName="Arial" fontSize="12" isBold="false" isItalic="true" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="10bu" fontName="Arial" fontSize="10" isBold="true" isItalic="false" isUnderline="true" isStrikeThrough="false" pdfFontName="Helvetica" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="header1" fontName="Arial" fontSize="24" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="header2" fontName="Arial" fontSize="18" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="header3" fontName="Arial" fontSize="16" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="addressHeader" fontName="Arial" fontSize="14" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="date" fontName="Arial" fontSize="12" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="type" fontName="Arial" fontSize="12" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="address" fontName="Arial" fontSize="10" isBold="false" isItalic="true" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="column_head" fontName="Arial" fontSize="10" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="body" isDefault="true" fontName="Arial" fontSize="10" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="note" isDefault="true" fontName="Arial" fontSize="9" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="KitTitle">
		<conditionalStyle>
			<conditionExpression><![CDATA[new Boolean($F{TYPEID} == null)]]></conditionExpression>
			<style isBold="true"/>
		</conditionalStyle>
	</style>
	<parameter name="ISSUBREPORTONLY" class="java.lang.String" isForPrompting="false"/>
	<parameter name="SOID" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["24"]]></defaultValueExpression>
	</parameter>
	<parameter name="ShipID" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["14"]]></defaultValueExpression>
	</parameter>
	<parameter name="ShipStatus" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["10"]]></defaultValueExpression>
	</parameter>
	<parameter name="module" class="java.lang.Object" isForPrompting="false"/>
	<parameter name="ckShowKitHeaders" class="java.lang.String" isForPrompting="false">
		<parameterDescription><![CDATA[80,90]]></parameterDescription>
		<defaultValueExpression><![CDATA["80"]]></defaultValueExpression>
	</parameter>
	<parameter name="ckShowBackOrderItems" class="java.lang.String" isForPrompting="false">
		<parameterDescription><![CDATA[100,101]]></parameterDescription>
		<defaultValueExpression><![CDATA["100"]]></defaultValueExpression>
	</parameter>
	<parameter name="ShowTracking" class="java.lang.Boolean" isForPrompting="false">
		<defaultValueExpression><![CDATA[false]]></defaultValueExpression>
	</parameter>
	<parameter name="shipCartonId" class="java.lang.Integer"/>
	<queryString>
		<![CDATA[SELECT shipitem.id AS shipitemid, soitem.solineitem AS solineitem, soitem.productnum AS productnum,
    soitem.customerpartnum AS custpartnum, product.description AS productdescription, soitem.note AS note,
    COALESCE(soitem.qtytofulfill,0) AS qtytofulfill, COALESCE(soitem.qtyfulfilled,0) AS qtyfulfilled,
    COALESCE(soitem.qtypicked,0) AS qtypicked, COALESCE(shipitem.qtyshipped,0) AS qtyshipped,
    uom.code AS uomcode, product.weight AS productweight, part.typeid, company.name AS companyname,
    soitem.unitprice + COALESCE(soitem.adjustamount/(CASE
                                                      WHEN soitem.qtytofulfill = 0
                                                      THEN 1
                                                      ELSE soitem.qtytofulfill
                                                     END),0) AS unitprice

FROM soitem
    INNER JOIN uom ON soitem.uomid = uom.id
    INNER JOIN product ON soitem.productid = product.id
    LEFT OUTER JOIN part ON product.partid = part.id
    LEFT OUTER JOIN shipitem ON shipitem.soItemId = soitem.id
    INNER JOIN company ON company.id = 1

WHERE soitem.soid = $P{SOID}
  AND shipitem.shipcartonid = $P{shipCartonId}
  AND (shipitem.shipID = $P{ShipID} OR (CASE WHEN $P{ckShowKitHeaders} = '80' and soitem.typeid = 80 THEN shipitem.shipid ELSE 1 END) IS NULL OR (CASE WHEN $P{ckShowBackOrderItems} = '100' and soitem.typeid != 80 THEN shipitem.shipid ELSE 1 END)IS NULL)
  AND soitem.typeid IN (10,30,40,50,60,70,$P!{ckShowKitHeaders})
  AND (part.typeid IN (10,21,22,30,40,50) OR (CASE WHEN $P{ckShowKitHeaders} = '80' THEN part.typeid ELSE 1 END) IS NULL)

ORDER BY soitem.solineitem]]>
	</queryString>
	<field name="SHIPITEMID" class="java.lang.Integer"/>
	<field name="SOLINEITEM" class="java.lang.Integer"/>
	<field name="PRODUCTNUM" class="java.lang.String"/>
	<field name="CUSTPARTNUM" class="java.lang.String"/>
	<field name="PRODUCTDESCRIPTION" class="java.lang.String"/>
	<field name="NOTE" class="java.lang.String"/>
	<field name="QTYTOFULFILL" class="java.lang.Double"/>
	<field name="QTYFULFILLED" class="java.lang.Double"/>
	<field name="QTYPICKED" class="java.lang.Double"/>
	<field name="QTYSHIPPED" class="java.lang.Double"/>
	<field name="UOMCODE" class="java.lang.String"/>
	<field name="PRODUCTWEIGHT" class="java.lang.Double"/>
	<field name="TYPEID" class="java.lang.Integer"/>
	<field name="COMPANYNAME" class="java.lang.String"/>
	<field name="UNITPRICE" class="java.lang.Double"/>
	<variable name="CountCustParts" class="java.lang.Integer" calculation="Sum">
		<variableExpression><![CDATA[(($F{CUSTPARTNUM} == null) || ($F{CUSTPARTNUM}.length() < 1)) ? new Integer(0) : new Integer(1)]]></variableExpression>
	</variable>
	<variable name="PartInfo" class="java.lang.String">
		<variableExpression><![CDATA[($F{PRODUCTNUM} == null) ? "" :
	(($F{CUSTPARTNUM} == null) || ($F{CUSTPARTNUM}.length() < 1)) ? $F{PRODUCTNUM} + "; " + $F{PRODUCTDESCRIPTION} : $F{CUSTPARTNUM} + " (" + $F{PRODUCTNUM} + "); " + $F{PRODUCTDESCRIPTION}]]></variableExpression>
	</variable>
	<variable name="QtyRemaining" class="java.lang.Double">
		<variableExpression><![CDATA[new Double(
($P{ShipStatus}.trim().equals("30"))
	? $F{QTYTOFULFILL}.doubleValue() - $F{QTYFULFILLED}.doubleValue()
	: $F{QTYTOFULFILL}.doubleValue() - $F{QTYFULFILLED}.doubleValue() - $F{QTYPICKED}.doubleValue()
)]]></variableExpression>
	</variable>
	<variable name="ShippingItemIDs" class="java.lang.String" resetType="Group" resetGroup="SoLineItems">
		<variableExpression><![CDATA[($V{ShippingItemIDs} == null)
	? $F{SHIPITEMID}.toString()
	: $V{ShippingItemIDs} + "," + $F{SHIPITEMID}.toString()]]></variableExpression>
	</variable>
	<variable name="TrackingInfo" class="java.lang.String" resetType="None">
		<variableExpression><![CDATA[((($P{module} == null) || ($V{ShippingItemIDs} == null)) ? "" : ((com.evnt.eve.modules.ReportHelperModule) $P{module}).getAllShipItemTrackingInfo("ShipItem", $V{ShippingItemIDs}).replaceAll("    ","\n"))]]></variableExpression>
	</variable>
	<variable name="QtyShipped" class="java.lang.Double" resetType="Group" resetGroup="SoLineItems" calculation="Sum">
		<variableExpression><![CDATA[$F{QTYSHIPPED}]]></variableExpression>
	</variable>
	<variable name="PriceDecimal" class="java.lang.String" resetType="None">
		<variableExpression><![CDATA[System.getProperty("REPORT_DECIMAL_PRICE")]]></variableExpression>
	</variable>
	<variable name="QtyDecimal" class="java.lang.String" resetType="None">
		<variableExpression><![CDATA[System.getProperty("REPORT_DECIMAL_QTY")]]></variableExpression>
	</variable>
	<variable name="CostDecimal" class="java.lang.String" resetType="None">
		<variableExpression><![CDATA[System.getProperty("REPORT_DECIMAL_COST")]]></variableExpression>
	</variable>
	<group name="Header">
		<groupExpression><![CDATA[1]]></groupExpression>
		<groupHeader>
			<band height="11">
				<textField isStretchWithOverflow="true" evaluationTime="Report" pattern="" isBlankWhenNull="true">
					<reportElement key="textField-9" style="10b" stretchType="RelativeToBandHeight" mode="Transparent" x="0" y="0" width="231" height="11" forecolor="#000000" backcolor="#FFFFFF" uuid="de51ce4a-d2e0-4d88-922a-bbb161512664"/>
					<box>
						<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Bottom" rotation="None">
						<font fontName="Arial" size="7" isBold="true" pdfFontName="Helvetica-Bold"/>
						<paragraph lineSpacing="Single"/>
					</textElement>
					<textFieldExpression><![CDATA[($V{CountCustParts}.intValue() > 0) ? "Item* / Description" : "Item / Description"]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
					<reportElement key="textField-11" style="10b" stretchType="RelativeToBandHeight" mode="Opaque" x="231" y="0" width="45" height="11" forecolor="#000000" backcolor="#FFFFFF" uuid="b461176e-5526-4d20-a697-76737914ed28"/>
					<box>
						<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Bottom" rotation="None">
						<font fontName="Arial" size="7" isBold="true" pdfFontName="Helvetica-Bold"/>
						<paragraph lineSpacing="Single"/>
					</textElement>
					<textFieldExpression><![CDATA["Qty Shipped"]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="11">
				<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
					<reportElement key="textField-10" mode="Transparent" x="0" y="1" width="276" height="10" isRemoveLineWhenBlank="true" forecolor="#000000" backcolor="#FFFFFF" uuid="2202290c-45d2-4487-97dd-382a2c643c8b">
						<printWhenExpression><![CDATA[new Boolean($V{CountCustParts}.intValue() > 0)]]></printWhenExpression>
					</reportElement>
					<box leftPadding="9">
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#FFFFFF"/>
					</box>
					<textElement textAlignment="Left" verticalAlignment="Bottom" rotation="None">
						<font fontName="Arial" size="7"/>
						<paragraph lineSpacing="Single"/>
					</textElement>
					<textFieldExpression><![CDATA["* Part numbers in parenthesis are " + $F{COMPANYNAME} + " numbers for the part"]]></textFieldExpression>
				</textField>
			</band>
		</groupFooter>
	</group>
	<group name="SoLineItems">
		<groupExpression><![CDATA[$F{SOLINEITEM}]]></groupExpression>
		<groupHeader>
			<band/>
		</groupHeader>
		<groupFooter>
			<band height="10">
				<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
					<reportElement key="textField-2" stretchType="RelativeToTallestObject" mode="Transparent" x="0" y="0" width="231" height="10" forecolor="#000000" backcolor="#FFFFFF" uuid="5f559d7d-ee8d-4a3d-89ab-2550fb319e27"/>
					<box leftPadding="2" bottomPadding="0" rightPadding="0">
						<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.5" lineColor="#000000"/>
						<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Left" verticalAlignment="Top" rotation="None">
						<font fontName="Arial" size="7"/>
						<paragraph lineSpacing="Single"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{PartInfo} +
((($V{TrackingInfo}.equals("") || !$P{ShowTracking}) ? "" : $V{TrackingInfo})
    + ((($F{NOTE} == null) || ($F{NOTE}.equals(""))) ? "" : "\n  " + $F{NOTE}))]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
					<reportElement key="textField-3" stretchType="RelativeToTallestObject" mode="Transparent" x="231" y="0" width="25" height="10" forecolor="#000000" backcolor="#FFFFFF" uuid="8ff4851a-9a70-4250-b744-7b62a4a21f8c"/>
					<box>
						<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.5" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right" verticalAlignment="Top" rotation="None">
						<font fontName="Arial" size="7"/>
						<paragraph lineSpacing="Single"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{QTYSHIPPED}]]></textFieldExpression>
					<patternExpression><![CDATA[$V{QtyDecimal}]]></patternExpression>
				</textField>
				<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
					<reportElement key="textField-6" stretchType="RelativeToTallestObject" mode="Transparent" x="256" y="0" width="20" height="10" forecolor="#000000" backcolor="#FFFFFF" uuid="6538b4ca-52a2-4c15-b4c2-101956a8de03"/>
					<box leftPadding="2">
						<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.5" lineColor="#000000"/>
						<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Left" verticalAlignment="Top" rotation="None">
						<font fontName="Arial" size="7"/>
						<paragraph lineSpacing="Single"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{UOMCODE}]]></textFieldExpression>
				</textField>
			</band>
		</groupFooter>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band splitType="Prevent"/>
	</title>
	<pageHeader>
		<band splitType="Prevent"/>
	</pageHeader>
	<columnHeader>
		<band splitType="Prevent"/>
	</columnHeader>
	<detail>
		<band splitType="Immediate"/>
	</detail>
	<columnFooter>
		<band splitType="Prevent"/>
	</columnFooter>
	<pageFooter>
		<band splitType="Prevent"/>
	</pageFooter>
	<summary>
		<band splitType="Stretch"/>
	</summary>
</jasperReport>

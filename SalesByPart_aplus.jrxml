<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="SalesByPartAPLUS" pageWidth="612" pageHeight="792" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="aee88269-be34-4ef4-8f44-08571a3ace20">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="dateRange1" class="java.util.Date" isForPrompting="false">
		<parameterDescription><![CDATA[This Month]]></parameterDescription>
		<defaultValueExpression><![CDATA[new Date()]]></defaultValueExpression>
	</parameter>
	<parameter name="dateRange2" class="java.util.Date" isForPrompting="false">
		<defaultValueExpression><![CDATA[new Date()]]></defaultValueExpression>
	</parameter>
	<parameter name="cbApplyDateFilter" class="java.lang.String" isForPrompting="false">
		<parameterDescription><![CDATA[so.datefirstship,Scheduled Fulfillment Date,so.datecreated,Date Created,so.dateissued,Date Issued,so.datecompleted,SO Date Completed,so.datelastmodified,Date Last Changed,postso.postdate,SO Item Date Fulfilled]]></parameterDescription>
		<defaultValueExpression><![CDATA["so.dateissued"]]></defaultValueExpression>
	</parameter>
	<parameter name="productNum" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["%"]]></defaultValueExpression>
	</parameter>
	<parameter name="customerID" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["%"]]></defaultValueExpression>
	</parameter>
	<parameter name="locationGroupID" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["-1"]]></defaultValueExpression>
	</parameter>
	<parameter name="salesPerson" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["%"]]></defaultValueExpression>
	</parameter>
	<parameter name="ckEstimate" class="java.lang.String" isForPrompting="false">
		<parameterDescription><![CDATA[10,100]]></parameterDescription>
		<defaultValueExpression><![CDATA["10"]]></defaultValueExpression>
	</parameter>
	<parameter name="ckIssued" class="java.lang.String" isForPrompting="false">
		<parameterDescription><![CDATA[20,100]]></parameterDescription>
		<defaultValueExpression><![CDATA["20"]]></defaultValueExpression>
	</parameter>
	<parameter name="ckInProgress" class="java.lang.String" isForPrompting="false">
		<parameterDescription><![CDATA[25,100]]></parameterDescription>
		<defaultValueExpression><![CDATA["25"]]></defaultValueExpression>
	</parameter>
	<parameter name="ckFulfilled" class="java.lang.String" isForPrompting="false">
		<parameterDescription><![CDATA[60,100]]></parameterDescription>
		<defaultValueExpression><![CDATA["60"]]></defaultValueExpression>
	</parameter>
	<parameter name="ckClosedShort" class="java.lang.String" isForPrompting="false">
		<parameterDescription><![CDATA[70,100]]></parameterDescription>
		<defaultValueExpression><![CDATA["70"]]></defaultValueExpression>
	</parameter>
	<parameter name="ckVoided" class="java.lang.String" isForPrompting="false">
		<parameterDescription><![CDATA[80,100]]></parameterDescription>
		<defaultValueExpression><![CDATA["100"]]></defaultValueExpression>
	</parameter>
	<parameter name="ckIncludeReturns" class="java.lang.String" isForPrompting="false">
		<parameterDescription><![CDATA[20,900]]></parameterDescription>
		<defaultValueExpression><![CDATA["900"]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT
part.id,
part.num AS PARTNUM,
part.description AS DESCRIPTION,
company.name AS COMPANYNAME,
soitem.description AS SOITEMDESCRIPTION,
sum(IF(soitem.typeid = 20, (soitem.qtytofulfill * -1),soitem.qtytofulfill)) AS QTYSOLD,
avg(IF(soitem.typeid = 20, (soitem.unitprice * -1),soitem.unitprice)) AS SALESAMOUNT,
sum(soitem.totalprice) AS SALESTOTAL

FROM soitem

LEFT OUTER JOIN so ON so.id = soitem.soid
LEFT OUTER JOIN product ON soitem.productid = product.id
LEFT OUTER JOIN part ON part.id = product.partid
INNER JOIN company ON company.id = 1

WHERE soitem.typeid IN (10,11,12,$P!{ckIncludeReturns},21)
  AND so.statusid IN ($P{ckEstimate}, $P{ckIssued}, $P{ckInProgress}, $P{ckFulfilled}, $P{ckClosedShort}, $P{ckVoided})
  AND $P!{cbApplyDateFilter} BETWEEN $P{dateRange1} AND DATE_SUB($P{dateRange2}, INTERVAL 1 SECOND)
  AND soitem.productnum LIKE $P{productNum}
  AND so.locationgroupid IN ($P!{locationGroupID})
  AND so.customerid LIKE $P{customerID}
  AND UPPER(so.salesman) LIKE UPPER($P{salesPerson})

GROUP BY part.id, part.num,part.description,company.name, soitem.description
ORDER BY so.dateissued, part.num]]>
	</queryString>
	<field name="DESCRIPTION" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="QTYSOLD" class="java.lang.Double"/>
	<field name="SALESAMOUNT" class="java.lang.Double"/>
	<field name="SALESTOTAL" class="java.lang.Double"/>
	<field name="COMPANYNAME" class="java.lang.String"/>
	<field name="PARTNUM" class="java.lang.String"/>
	<field name="SOITEMDESCRIPTION" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<variable name="PriceDecimal" class="java.lang.String" resetType="None">
		<variableExpression><![CDATA[System.getProperty("REPORT_DECIMAL_PRICE")]]></variableExpression>
	</variable>
	<variable name="QtyDecimal" class="java.lang.String" resetType="None">
		<variableExpression><![CDATA[System.getProperty("REPORT_DECIMAL_QTY")]]></variableExpression>
	</variable>
	<variable name="CostDecimal" class="java.lang.String" resetType="None">
		<variableExpression><![CDATA[System.getProperty("REPORT_DECIMAL_COST")]]></variableExpression>
	</variable>
	<variable name="DateFormat" class="java.lang.String" resetType="None">
		<variableExpression><![CDATA[(System.getProperty("REPORT_DATE_FORMAT"))]]></variableExpression>
	</variable>
	<variable name="QTYSOLD_1" class="java.lang.Double" calculation="Sum">
		<variableExpression><![CDATA[$F{QTYSOLD}]]></variableExpression>
	</variable>
	<variable name="SALESTOTAL_1" class="java.lang.Double" calculation="Sum">
		<variableExpression><![CDATA[$F{SALESTOTAL}]]></variableExpression>
	</variable>
	<title>
		<band height="62" splitType="Stretch">
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-5" x="0" y="0" width="572" height="18" uuid="37e07489-e184-4966-893a-6f00ae10920f"/>
				<textElement textAlignment="Center">
					<font fontName="Open Sans" size="13" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{COMPANYNAME}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement key="staticText" mode="Transparent" x="0" y="18" width="572" height="22" forecolor="#000000" backcolor="#FFFFFF" uuid="a2eb22de-a64d-4ec6-b6b1-e7aa49c11509"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#FFFFFF"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="None">
					<font fontName="Open Sans" size="16" isBold="true"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<text><![CDATA[Sales By Part]]></text>
			</staticText>
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement key="" mode="Transparent" x="0" y="40" width="572" height="14" forecolor="#000000" backcolor="#FFFFFF" uuid="332afeea-68ae-4b19-818e-52b184d37d23">
					<printWhenExpression><![CDATA[true]]></printWhenExpression>
				</reportElement>
				<box leftPadding="3" rightPadding="3">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#FFFFFF"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Bottom" rotation="None">
					<font fontName="Open Sans" size="10" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{dateRange1}.getYear() <= -900 && $P{dateRange2}.getYear() >= 1100
  ? "Date Range: All"
  : "Date Range: " + (new SimpleDateFormat($V{DateFormat})).format($P{dateRange1}) + " - " +
(new SimpleDateFormat($V{DateFormat})).format($P{dateRange2}.getTime()-86400000)]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<columnHeader>
		<band height="16" splitType="Stretch">
			<staticText>
				<reportElement key="element-90" mode="Opaque" x="80" y="0" width="208" height="16" forecolor="#000000" backcolor="#CCCCCC" uuid="16b7ea34-4f98-483f-945b-9ca66084b270"/>
				<textElement textAlignment="Left" verticalAlignment="Middle" rotation="None">
					<font fontName="Open Sans" size="11" isBold="true"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<text><![CDATA[Part Description]]></text>
			</staticText>
			<staticText>
				<reportElement key="element-90" mode="Opaque" x="288" y="0" width="66" height="16" forecolor="#000000" backcolor="#CCCCCC" uuid="a49f7dad-516c-4941-90a4-03011f967941"/>
				<textElement textAlignment="Right" verticalAlignment="Middle" rotation="None">
					<font fontName="Open Sans" size="11" isBold="true"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<text><![CDATA[Quantity]]></text>
			</staticText>
			<staticText>
				<reportElement key="element-90" mode="Opaque" x="354" y="0" width="109" height="16" forecolor="#000000" backcolor="#CCCCCC" uuid="8af646b5-d4b9-4339-9b03-5bb378bf8d6c"/>
				<textElement textAlignment="Right" verticalAlignment="Middle" rotation="None">
					<font fontName="Open Sans" size="11" isBold="true"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<text><![CDATA[Sales Amount]]></text>
			</staticText>
			<staticText>
				<reportElement key="element-90" mode="Opaque" x="463" y="0" width="109" height="16" forecolor="#000000" backcolor="#CCCCCC" uuid="44fa55b8-b20f-4eaa-9ade-96c60632c79e"/>
				<textElement textAlignment="Right" verticalAlignment="Middle" rotation="None">
					<font fontName="Open Sans" size="11" isBold="true"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<text><![CDATA[Sales Total]]></text>
			</staticText>
			<staticText>
				<reportElement key="element-90" mode="Opaque" x="0" y="0" width="80" height="16" forecolor="#000000" backcolor="#CCCCCC" uuid="ae4a084f-fff6-454a-8c8a-484f84ebd21e"/>
				<textElement textAlignment="Left" verticalAlignment="Middle" rotation="None">
					<font fontName="Open Sans" size="11" isBold="true"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<text><![CDATA[Part Description]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="20">
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement stretchType="RelativeToTallestObject" x="80" y="0" width="208" height="20" uuid="83ee8e0f-27f4-462d-9528-6e2fd3826e09"/>
				<textElement>
					<font fontName="Open Sans"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{SOITEMDESCRIPTION}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement stretchType="RelativeToTallestObject" x="288" y="0" width="66" height="20" uuid="bd122da2-1e05-4b9f-9428-9d2f67bb7b88"/>
				<textElement textAlignment="Right">
					<font fontName="Open Sans"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{QTYSOLD}]]></textFieldExpression>
				<patternExpression><![CDATA[$V{QtyDecimal}]]></patternExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement stretchType="RelativeToTallestObject" x="354" y="0" width="109" height="20" uuid="96a78913-35a9-47fb-b815-c4ced8e2920a"/>
				<textElement textAlignment="Right">
					<font fontName="Open Sans"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{SALESAMOUNT}]]></textFieldExpression>
				<patternExpression><![CDATA[$V{PriceDecimal}]]></patternExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement stretchType="RelativeToTallestObject" x="463" y="0" width="109" height="20" uuid="39edcd0b-dd2f-4e42-93ee-15450bb5a5e1"/>
				<textElement textAlignment="Right">
					<font fontName="Open Sans"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{SALESTOTAL}]]></textFieldExpression>
				<patternExpression><![CDATA[$V{PriceDecimal}]]></patternExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement stretchType="RelativeToTallestObject" x="0" y="0" width="80" height="20" uuid="b4a10821-0e51-4229-92a5-bff2c1fd2c6f"/>
				<textElement>
					<font fontName="Open Sans"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{PARTNUM}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<lastPageFooter>
		<band height="20">
			<textField isBlankWhenNull="true">
				<reportElement x="288" y="0" width="66" height="20" uuid="7c80b825-a40f-4ea0-a391-8ac888f37ca0"/>
				<box>
					<topPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Right">
					<font fontName="Open Sans" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{QTYSOLD_1}]]></textFieldExpression>
				<patternExpression><![CDATA[$V{QtyDecimal}]]></patternExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="463" y="0" width="109" height="20" uuid="bb958cb7-3787-4dd5-b9ad-8d022204f96b"/>
				<box>
					<topPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Right">
					<font fontName="Open Sans" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{SALESTOTAL_1}]]></textFieldExpression>
				<patternExpression><![CDATA[$V{PriceDecimal}]]></patternExpression>
			</textField>
		</band>
	</lastPageFooter>
</jasperReport>
